#################################################################
       UNIX/MS Windows用  デスクトップマスコット プログラム      
       macopix : Mascot Constructive Pilot for X                 
                                                    ver 1.7.3    
                 Windows(バイナリ配布)版 簡易ドキュメント        
                                                                 
                            2008.05.24  Kurumi Chimari           
                            chimari@rosegray.sakura.ne.jp        
                            http://rosegray.sakura.ne.jp/        
#################################################################

-------------------------------------------------------------------------------
［   名称   ］MaCoPiX-1.7.3-win32
［  開発者  ］くるみちまり
［  公開先  ］http://rosegray.sakura.ne.jp/
［  連絡先  ］chimari@rosegray.sakura.ne.jp
［ 動作環境 ］Microsoft Windows 2000 Professional / XP 
［ 推奨環境 ］Microsoft Windows XP SP2 or later
［   種別   ］デスクトップマスコットソフト (フリーソフトウェア)
［   圧縮   ］LZH
［   転載   ］GNU GPL2 (COPYING を参照)
［  著作権  ］(C) 2002-2008 Kurumi Chimari
-------------------------------------------------------------------------------

=============================================================
                      ■ 目次 ■
  - このプログラムについて
  - おもな特徴
  - 動作環境
  - Windows版について
  - インストール〜起動
  - マスコットの追加インストール
  - BIFF(メール着信チェック)機能利用時の注意点
  - よくある質問
  - Windows版をソースからコンパイル
  - 著作権的話とか
=============================================================


▼このプログラムについて
  MaCoPiXはデスクトップマスコットプログラムです。
  GPLにしたがって配布されているフリーソフトウェアです。

  いちおう、おすわりマスコットを作成・動作させることに重点を置いています。
  現段階で作成できるマスコットは
         ・フォーカス追従型 ...いわゆるおすわりマスコット
         ・位置固定型 ...そのままデスクトップにはっつけるマスコット
  の二種類です。
  それぞれに対してデジタル時計の有無を指定できるため、時計型
  アクセサリとしても使用できるかと思います。
                                   (時計の機能はまだ貧弱ですが……)
  また、POP(APOP)対応のBIFF(メール着信チェック)機能を持っています。
  ...がまだ動作検証がじゅうぶんとはいえませんので、使用にはご注意ください。
    

  とりあえず、マスコットの作成からプロファイルの各種変更にいたるまで、
  ユーザーレベルではマスコットファイルに直接触らずともメニューから
  GUIですべて変更できるように考えています。

▼おもな特徴
  ・おすわり/固定マスコット
  ・メイル着信お知らせ(Biff)機能 [POP3/APOP]
  ・時計機能
  ・設定項目の多さと柔軟性、マスコット作成もGUIから可能
  ・複数同時機能


▼動作環境
   [for Microsoft Windows (バイナリ配布)]
     ・Windows2000,XP以降(Vistaは未検証)
     ・TAR32.DLL(GPL)を同梱
        ※参照「統合アーカイバプロジェクト」
            URL  http://www.csdinc.co.jp/archiver/
     ・他Gtk+等の必要なライブラリもバイナリ配布版にすべて含まれています。


▼Windows版について
  ソースコード自体はUNIX版と共通ですが、現段階では
    "ソケットメッセージ機能(含デュエットメッセージ機能)"
    を省略しています。
    Windows版のみの機能として、"TAR32.DLL"によるアーカイブの解凍機能を持ってい
    ることと、各パーツ(マスコット、メール着信画像、ふきだし、時計)のα値を設定
    して半透明にすることができることがあります(ver1.7.0からはUNIXでも一部半透
    明機能をサポートしています)。

    BIFF機能は、実質的にWindowsではローカルスプールなどは使用しませんので、
    POP (w/ or w/o APOP)のみに対応しています。

    必要なライブラリはこのバイナリ配布版中に同梱されています。
    展開したアーカイブディレクトリごと好きな場所にコピーして、そのまま使用でき
    ます。
    インストーラ付属の場合はそちらをお使いください。



▼本体のインストール〜起動
  MaCoPiXを動作させるためにはいずれかのマスコットも同時にインストール
  する必要があります。

  1. MaCoPiX-win32  本体のアーカイブをダウンロード 
  2. アーカイブを適当な場所に展開する
  3. MaCoPiX用マスコットアーカイブ(どれでもよい)をダウンロードしセーブしておく
         (MaCoPiX-mascot-HxB-0.10.tar.gz など)
  4. MaCoPiX本体 (macopix.exe)  を起動する。
  5. "MaCoPiX起動中"のメッセージウィンドウから
         "インストール"→"ランチャメニュー"を選択
     ダウンロードしたマスコットアーカイブファイル(.tar.gz)を指定する。
  6. マスコットが自動的にインストールされる(macopix.exeのあるディレク
     トリにUserData\が作成されます)。


▼マスコットの追加インストール
  1. インストールしたいMaCoPiX用マスコットアーカイブ(.tar.gz)をダウンロー
     ドしセーブしておく  
  2. MaCoPiX本体 (macopix.exe)  を起動する。
  3. マスコットを右クリックすると出てくるメニューから
     "インストール"→"ランチャメニュー (tar+gz)を選択。
     ダウンロードしたマスコットアーカイブファイル(.lzh)を指定する。
  4. マスコットが自動的にインストールされる(macopix.exeのあるディレク
     トリのUserData\下に)。


▼BIFF(メール着信チェック)機能利用時の注意点
  まず、この機能についてはまだ動作検証が不十分なこともあり、予期しないエラーが
  おこることも考えられますので、ご理解の上ご使用ください。
  (とはいえ、致命的なバグなどはすべてつぶしているつもりです)
  
  基本的Windowsではローカルスプールなどは使用しませんので、にPOPもしくはPOP
  (APOP)が利用できるメールサーバーにアクセスして、メールがきているかどうかを定
  期的(デフォルトでは60sec毎)にチェックすることができます。
  ver1.6.2からPOP3でのSSL/TLSプロトコルに(試験的に)対応しました。
  IMAPには対応していません。

  また、デフォルトではPOP用のパスワードを設定ファイル(UserData/macopix.ini)に
  平文で保存してしまいます。セキュリティ的に気になるという方は、設定ウィンドウ
  の"メール着信"の項目内でパスワードの保存"のチェックを外すようにしてください。
  こうすることにより、BIFF起動時にパスワードを聞くウィンドウが立ち上がり、
  そこで都度パスワードを入力することができます。



▼よくある質問
  Q. マスコットをインストールしたが見つからない。
     マスコットの切り替えはどうやるのか?
  A. 配布しているマスコットアーカイブはひとつのメニューとそれに登録さ
     れた複数のマスコットからなりたっています。
     まず、目的のマスコットが登録されたメニューに変更してください。右クリックで
       開く→ランチャメニュー→ランチャ
     でいちばん簡単にインストール済みのメニューをさがすことができます。
     メニューを切り替えたら右クリックメニューから
            マスコットランチャ→(メニュータイトル)→(マスコットタイトル)  
     でマスコットの変更ができます。

  Q. いつも起動時にメニューを選択させられて鬱陶しい。
  A. 起動時にデフォルトで選択されるメニューを指定するすることができます。
     メニューを読み込んでから右クリックメニューで
       保存→ランチャメニュー→デフォルトに設定
     で現在読み込んでいるメニューを起動時によませるようにします。
     ("保存→すべて保存"でもOK)

  Q. 特定のマスコットを起動時に選択したい。
  A. インストール済みのマスコットについてはコマンドラインオプションで
            macopix.exe HxB_ayana.mcpx
     のように .mcpxファイルを指定すればよいです。
     .mcpxファイルはmacopix.exeのあるディレクトリにあるUserDataディレ
     クトリの下にインストールされています。

  Q. 設定を変更したが反映されない。
  A. 変更した設定を保存しない限りは次回起動以降に反映されません。
     右クリックメニューの
       保存
     から必要なものを保存してください。
       すべて保存
     を選択すると
       共通設定・現在表示中のマスコットの設定・現在使用中のメニューをデフォルト指定
     を保存することができます。
     また、マスコットの設定を変更してからセーブしないままで、マスコットの変更
     を行いますと、その時点で変更内容は破棄されますのでご注意ください。

  Q. ふきだしの台詞を変更したい。
  A. 右クリックメニューから
       設定
     を選択して設定ウィンドウを立ち上げて、
       マスコット→アニメ
     の項目で編集することができます。
     詳細はホームページまたは設定ウィンドウ内のふきだし項目にある制御文字
     一覧をご覧ください。
     なお、設定変更したあとはマスコットの保存をお忘れなく。

  Q. 自分でオリジナルのマスコットは作れないか?
  A. もちろん作れます。
     詳しくはホームページをご覧ください。
   
  Q. フォーカスがないときなどにタスクバーに座らせたい。
  A. 設定ウィンドウで「共通設定」→「移動」→「ホームポジション」で、
     フォーカス(フォアグラウンド)ウィンドウがないときと画面上部にマス
     コットがはみ出すときの動作を指定できます。
   
  Q. 起動時に時報やメイル着信お知らせ(Biff)機能を自動的に有効にしたい。
  A. 起動時のオプションでスイッチできます。
       macopix.exe -b
     で起動時にBiffをON
       macopix.exe -s
     で起動時に時報をONとなります。
     両方使いたいときは
       macopix.exe -b -s
     とすることももちろんできます。
     ショートカットの"リンク先"などに上記のオプションをつけたりして利用
     してください。

  Q. 複数のメイルアカウントを持っていてそれぞれにBiffを使いたいが...。
  A. ひとつの設定ファイルにはひとつのメイルアカウントしか登録できません。
     したがって、設定ファイルをふたつ以上用意してふたつ以上のmacopix.exe
     を同時起動するという形でならば実現はできます。
     標準の設定ファイルはmacopix.exeのあるディレクトリの
       UserData\macopix.ini
     ファイルです。
     このファイルにアカウント1の設定をセーブし、
       UserData\mail2.ini
     という設定ファイル名でアカウント2の設定をセーブした上で、
       macopix.exe -b
       macopix.exe -b -r mail2.ini
     などとすると、それぞれ別のBiffを利用することができます。

  Q. Windows2000でタスクトレイのアイコンの色がおかしい?
  A. 仕様です(汗)。
     Windows2000では標準ではシステム16色のアイコンしかタスクトレイで
     正常に表示できません。
     256色以上のアイコンの表示を可能にするフリーウェア等を利用するか、
     設定ウィンドウからタスクトレイのアイコンを表示しないように設定する
     ことができます。
     WindowsXP以降ではこの問題はおこりません。

  Q. ふきだし・時計の表示が重い/ちらつく。
  A. デフォルトでは背景のみを半透明表示する設定になっています。
     これを
         "背景のみ"半透明するオプションをはずす
     もしくは
         不透明度を100%にして半透明は使わないようにする
     ことで負荷を多少軽減できると思います。



▼Windows版をソースからコンパイル
   msys,mingw,Gtk+/Win32、OpenSSL-Win32、そしてTAR32.DLLを用意
   (インストール)しておきます。
   またUNLHA32.DLLを使うようにコンパイルすることもできます。その場合は
   そちらもインストールしておきます。
   前者についてはメールエージェントの"sylpheed-win32"についての記述が
     参考になると思います。
      URL: http://sylpheed.sraoss.jp/wiki/

   - msys上の個人ディレクトリに sourceを展開。
   - UNLHA32.DLLを使う場合はそちらを用意。
     UNLHA32.DLLをインストールしたディレクトリ
     (C:\Program Files\ArchiverDll\UNLHA32\)
     にある
        UNLHA32.DLL
        UNLHA32.H
     をmsys上のディレクトリにコピー。
      % pexports UNLHA32.DLL > unlha32.def
     unlha32.defを編集  stdcallスタック長(@n)を付加
              Unlha  → Unlha@16
        UnlhaCloseArchive  →  UnlhaCloseArchive@4
        UnlhaOpenArchive  →  UnlhaOpenArchive@12
        UnlhaFindFirst  →  UnlhaFindFirst@12
      % dlltool -d unlha32.def -l libunlha32.a
   - こうしてできた libunlha32.a  と UNLHA32.Hを展開したsourceのなかの
     src/ ディレクトリにコピーしておく。
     (TAR32.DLLも同様な準備をするが、すでに準備できたものをsourceツリー
      に同梱している。)
   - make用のスクリプトがあるのでsourceアーカイブ中で
      % ./makewin32.sh
     を実行すればよい。
   - $HOME/dist/ の下にmakeされる。
     


▼著作権的話とか
   The code in this distribution is Copyright 2002-2008 by Kurumi Chimari.

   このプログラムはフリーソフトウェアです。あなたはこれを、 Free Software　
   Foundation によって発行されたGNU一般公衆利用許諾書 (バージョン2、
   または(任意に)それ以降のバージョンのどちらか)の定める条件に従って、
   これを再配布、そして(あるいは)修正することができます。

   このプログラムは有用であることを願って配布されますが、*全くの無保証*です。
   *商業可能性の保証*や*特定の目的への適合性*は、言外に示されたものも含め
   全く存在しません。詳しくはGNU一般公衆利用許諾書をご覧ください。

   あなたはこのプログラムとともにGNU一般公衆利用許諾書の複製を一部受け取った
   はずです。もし受け取っていなければ、Free Software Foundationまで請求
   してください(宛先は Free Software Foundation, Inc.,
   51 Franklin St., Fifth Floor, Boston, MA 02110-1301 USA)。

   加えて特別な例外として、K.ChimariはこのプログラムのコードをOpenSSLライブラリ
   (あるいはOpenSSLと同じライセンスが適用されたOpenSSLの改変されたバージョン)
   とリンクし、リンクされた両者を含む結合著作物を頒布する許可をあたえます。
   あなたはOpenSSL以外で使われているすべてのコードに関しては全面的にGNU一般公衆
   利用許諾書に従わなければなりません。あなたがこのファイルを改変したならば、
   あなたはこのバージョンのファイルに引き続き設けることもできますが、そうする義務
   はありません。もし例外を設けたくなければ、この例外条項をあなたのバージョンから
   は削除してください。


   GLib、GTK+、libiconv ライブラリは GNU LGPL に従います。詳細は
   COPYING.LIB を参照してください。

   Windows版バイナリパッケージに同梱されるOpenSSLライブラリ(libeay.dll,
   ssleay32.dll)はOpenSSLライセンスおよびSSLeayライセンスにしたがって
   配布されています。
   詳しくはLICENSE.SSLを参照してください。
   
   このプログラムソースおよびバイナリパッケージに同梱されている
   TAR32.DLLは吉岡恒夫さん作成のフリーソフトウェア(GPL準拠)です。
   参照URL http://www.csdinc.co.jp/archiver/lib/tar32.html


   Windowsへの対応につきましては、フォーカスウィンドウへの追従などにお
   いて、しろやぎゆうさんから多大なヒントを頂きました。ここに感謝申し上げます。

  
